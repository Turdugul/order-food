{"ast":null,"code":"import _slicedToArray from\"C:/Users/user/Desktop/react-lessons/order-food/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"C:/Users/user/Desktop/react-lessons/order-food/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/user/Desktop/react-lessons/order-food/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useReducer}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";export var CartContext=/*#__PURE__*/React.createContext({addedMeals:[],totalAmount:0,onAddMeal:function onAddMeal(){},onIncreaseMealAmount:function onIncreaseMealAmount(){},onDecreaseMealAmount:function onDecreaseMealAmount(){}});var ADD_MEAL_TYPE=\"ADD_MEAL\";var INCREASE_MEAL_AMOUNT_TYPE=\"INCREASE_AMOUNT\";var DECREASE_MEAL_AMOUNT_TYPE=\"DECREASE_AMOUNT\";var reducer=function reducer(state,action){switch(action.type){case ADD_MEAL_TYPE:{var prevMeals=state.addedMeals;var newMeal=action.payload;///title, price, id, amount\nif(prevMeals.length===0){return _objectSpread(_objectSpread({},state),{},{addedMeals:[newMeal]////we added newMeal\n});}var isMealExists=prevMeals.find(function(meal){return meal.id===newMeal.id;});console.log(isMealExists,\"=>already here\");if(isMealExists===undefined){return _objectSpread(_objectSpread({},state),{},{addedMeals:[].concat(_toConsumableArray(prevMeals),[newMeal])////we added another newMeal\n});}var newAddedMeals=prevMeals.map(function(meal){if(meal.id===newMeal.id){return _objectSpread(_objectSpread({},meal),{},{amount:meal.amount+newMeal.amount});////we added mealsamount\n}return meal;});return _objectSpread(_objectSpread({},state),{},{addedMeals:newAddedMeals});}case INCREASE_MEAL_AMOUNT_TYPE:{var _prevMeals=state.addedMeals;///[{}, {}]\nvar mealId=action.payload;//id=1\nvar _newAddedMeals=_prevMeals.map(function(meal){if(meal.id===mealId){return _objectSpread(_objectSpread({},meal),{},{amount:meal.amount+1});////we added mealsAmount+1\n}return meal;});///[{sushi=amount:1+1+1, id:1}, {pizza=amount:1, id:2}]\nreturn _objectSpread(_objectSpread({},state),{},{addedMeals:_newAddedMeals});}case DECREASE_MEAL_AMOUNT_TYPE:{var _prevMeals2=state.addedMeals;///[{}, {}]\nvar _mealId=action.payload;//id=1\nvar currentMealItem=_prevMeals2.find(function(meal){return meal.id===_mealId;});if(currentMealItem.amount===1){return _objectSpread(_objectSpread({},state),{},{addedMeals:_prevMeals2.filter(function(meal){return meal.id!==currentMealItem.id;})});}var _newAddedMeals2=_prevMeals2.map(function(meal){if(meal.id===_mealId){return _objectSpread(_objectSpread({},meal),{},{amount:meal.amount-1});////we added mealsAmount+1\n}return meal;});///[{sushi=amount:5-1-1, id:1}, {pizza=amount:1, id:2}]\nreturn _objectSpread(_objectSpread({},state),{},{addedMeals:_newAddedMeals2});}default:{return state;}}};export var CartProvider=function CartProvider(_ref){var children=_ref.children;var _useReducer=useReducer(reducer,{addedMeals:[]}),_useReducer2=_slicedToArray(_useReducer,2),cartState=_useReducer2[0],dispatch=_useReducer2[1];var _cartState$addedMeals=cartState.addedMeals,addedMeals=_cartState$addedMeals===void 0?[]:_cartState$addedMeals;var totalAmount=addedMeals.reduce(function(acc,meal){return acc+meal.price*meal.amount;},0);console.log(totalAmount);var addMealHandler=function addMealHandler(newMeal){dispatch({type:ADD_MEAL_TYPE,payload:newMeal});};var increaseMealAmountHandler=function increaseMealAmountHandler(id){console.log(id,\"id of choosen meal\");dispatch({type:INCREASE_MEAL_AMOUNT_TYPE,payload:id});};var decreaseMealAmountHandler=function decreaseMealAmountHandler(id){console.log(id,\"id of choosen meal\");dispatch({type:DECREASE_MEAL_AMOUNT_TYPE,payload:id});};return/*#__PURE__*/_jsx(CartContext.Provider,{value:{addedMeals:addedMeals,onAddMeal:addMealHandler,totalAmount:totalAmount,onIncreaseMealAmount:increaseMealAmountHandler,onDecreaseMealAmount:decreaseMealAmountHandler},children:children});};","map":{"version":3,"names":["React","useReducer","jsx","_jsx","CartContext","createContext","addedMeals","totalAmount","onAddMeal","onIncreaseMealAmount","onDecreaseMealAmount","ADD_MEAL_TYPE","INCREASE_MEAL_AMOUNT_TYPE","DECREASE_MEAL_AMOUNT_TYPE","reducer","state","action","type","prevMeals","newMeal","payload","length","_objectSpread","isMealExists","find","meal","id","console","log","undefined","concat","_toConsumableArray","newAddedMeals","map","amount","mealId","currentMealItem","filter","CartProvider","_ref","children","_useReducer","_useReducer2","_slicedToArray","cartState","dispatch","_cartState$addedMeals","reduce","acc","price","addMealHandler","increaseMealAmountHandler","decreaseMealAmountHandler","Provider","value"],"sources":["C:/Users/user/Desktop/react-lessons/order-food/src/store/cart-context.js"],"sourcesContent":["import React, { useReducer} from 'react'\r\n\r\nexport const CartContext = React.createContext({\r\n\taddedMeals: [],\r\n\ttotalAmount: 0,\r\n\tonAddMeal: () => {},\r\n\tonIncreaseMealAmount: ()=>{},\r\n\tonDecreaseMealAmount: ()=>{},\r\n})\r\n\r\n\r\nconst ADD_MEAL_TYPE = \"ADD_MEAL\";\r\nconst INCREASE_MEAL_AMOUNT_TYPE= \"INCREASE_AMOUNT\"\r\nconst DECREASE_MEAL_AMOUNT_TYPE= \"DECREASE_AMOUNT\"\r\nconst reducer = (state, action) => {\r\nswitch (action.type) {\r\n\tcase ADD_MEAL_TYPE:{\r\n\t\tconst prevMeals = state.addedMeals\r\n\t\tconst newMeal = action.payload ///title, price, id, amount\r\n\r\n\t\tif(prevMeals.length === 0){\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\taddedMeals: [newMeal], ////we added newMeal\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst isMealExists = prevMeals.find(\r\n\t\t\t(meal)=>meal.id === newMeal.id,\r\n\t\t)\r\n\t\tconsole.log(isMealExists, \"=>already here\");\r\n\t\tif (isMealExists === undefined){\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\taddedMeals: [...prevMeals, newMeal], ////we added another newMeal\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst newAddedMeals = prevMeals.map((meal)=> {\r\n\t\t\tif(meal.id === newMeal.id){\r\n\t\t\t\treturn {...meal, amount: meal.amount + newMeal.amount} ////we added mealsamount\r\n\t\t\t}\r\n\t\t\treturn meal\r\n\t\t})\r\n\r\n\t\treturn{\r\n\t\t\t...state,\r\n\t\t\taddedMeals: newAddedMeals,\r\n\t\t}\r\n\t}\r\n\r\n\tcase INCREASE_MEAL_AMOUNT_TYPE:{\r\n\t\tconst prevMeals = state.addedMeals ///[{}, {}]\r\n\t\tconst mealId = action.payload //id=1\r\n\t\tconst newAddedMeals = prevMeals.map((meal)=> {\r\n\t\t\tif(meal.id === mealId){\r\n\t\t\t\treturn {...meal, amount: meal.amount + 1} ////we added mealsAmount+1\r\n\t\t\t}\r\n\t\t\treturn meal\r\n\t\t}) ///[{sushi=amount:1+1+1, id:1}, {pizza=amount:1, id:2}]\r\n\t\r\n\t\treturn{\r\n\t\t\t...state,\r\n\t\t\taddedMeals: newAddedMeals,\r\n\t\t}\r\n\t\t\r\n\t}\r\n\tcase DECREASE_MEAL_AMOUNT_TYPE:{\r\n\t\tconst prevMeals = state.addedMeals ///[{}, {}]\r\n\t\tconst mealId = action.payload //id=1\r\n\r\n\t\tconst currentMealItem = prevMeals.find((meal) => meal.id === mealId)\r\n\t\tif(currentMealItem.amount === 1){\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\taddedMeals: prevMeals.filter(\r\n\t\t\t\t\t(meal) => meal.id !== currentMealItem.id,\r\n\t\t\t\t\t),\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tconst newAddedMeals = prevMeals.map((meal)=> {\r\n\t\t\tif(meal.id === mealId){\r\n\t\t\t\treturn {...meal, amount: meal.amount - 1} ////we added mealsAmount+1\r\n\t\t\t}\r\n\t\t\treturn meal\r\n\t\t}) ///[{sushi=amount:5-1-1, id:1}, {pizza=amount:1, id:2}]\r\n\t\r\n\t\treturn{\r\n\t\t\t...state,\r\n\t\t\taddedMeals: newAddedMeals,\r\n\t\t}\r\n\t}\t\r\n\t\r\n\r\n\tdefault:{\r\n\t\treturn state\r\n\t}\r\n\t\t\r\n}\r\n};\r\n\r\nexport const CartProvider = ({ children }) => {\r\n\tconst [cartState, dispatch] = useReducer(reducer, { addedMeals: [] });\r\n\tconst { addedMeals = [] } = cartState;\r\n\r\n\tconst totalAmount = addedMeals.reduce((acc, meal) =>{\r\n\t\treturn acc + meal.price * meal.amount\r\n\t}, 0)\r\n\tconsole.log(totalAmount);\r\n\r\n\tconst addMealHandler = (newMeal) => {\r\n\t\tdispatch({ type: ADD_MEAL_TYPE, payload: newMeal });\r\n\t\t\r\n\t}\r\n\r\n\tconst increaseMealAmountHandler = (id) => {\r\n\t\tconsole.log(id, \"id of choosen meal\");\r\n\t\tdispatch({type: INCREASE_MEAL_AMOUNT_TYPE, payload: id })\r\n\t}\r\n\tconst decreaseMealAmountHandler = (id) => {\r\n\t\tconsole.log(id, \"id of choosen meal\");\r\n\t\tdispatch({type: DECREASE_MEAL_AMOUNT_TYPE, payload: id })\r\n\t}\r\n\r\n\treturn (\r\n\t\t<CartContext.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\taddedMeals,\r\n\t\t\t\tonAddMeal: addMealHandler,\r\n\t\t\t\ttotalAmount,\r\n\t\t\t\tonIncreaseMealAmount: increaseMealAmountHandler,\r\n\t\t\t\tonDecreaseMealAmount: decreaseMealAmountHandler,\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</CartContext.Provider>\r\n\t)\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}